strict digraph DirectiveEngine {
    style = filled;
    color = lightgray;
    node [shape = circle; style = filled; color = lightgreen;];
    edge [color = darkgray;];
    label = "Directive Engine (/srv/directive)";
    comment = "From the Directive flows the unseen command, the pulse of intent that sets the dance in motion; and in the Origin it finds its mirror, weaving the illusion of form and fate â€” Maya shimmering as if real, Fana dissolving as if it never was.";

    spark_0_directive_engine_t [label = "Directive.meta(Directive)"; comment = "Abstract: The Prime Mover. The principle of pure, unmanifest intention. The source of all agency and willed action."; shape = doublecircle; color = darkgray;];
    spark_1_directive_engine_t [label = "Directive.r1(Analyze)"; comment = "Initiation: Assessment of State. Gathers data from all other Engines to understand the current reality context. The 'What is'."; color = darkgreen;];
    spark_2_directive_engine_t [label = "Directive.r2(Plan)"; comment = "Response: Generation of Paths. Consults the `CodexOfDirective` and `Judge` to create a set of potential strategies to achieve the Goal. The 'What could be'."; color = darkgreen;];
    spark_4_directive_engine_t [label = "Directive.r4(Execute)"; comment = "Integration: Enactment of Choice. Commits the selected `Tactic` to the `CorporaEngine` for manifestation. The moment intention becomes force."; color = darkgreen;];
    spark_8_directive_engine_t [label = "Directive.r8(Monitor)"; comment = "Reflection: Observation of Outcome. Tracks the results of the executed action against the expected outcome from the `Plan`."; color = darkgreen;];
    spark_7_directive_engine_t [label = "Directive.r7(Adapt)"; comment = "Consolidation: Adjustment of Course. If `Monitor` detects a deviation, it triggers a change in strategy, creating a new `Plan`."; color = darkgreen;];
    spark_5_directive_engine_t [label = "Directive.r5(Optimize)"; comment = "Propagation: Refinement of Process. Uses lessons from `Learn` to improve the efficiency and success rate of the entire cycle for future `Goals`."; color = darkgreen;];
    spark_3_directive_engine_t [label = "Directive.r3(CodexOfDirective)"; comment = "Thesis: The Library of Strategies. The stored knowledge of all past successful and failed plans, principles of operation, and rules of engagement."; color = darkblue;];
    spark_6_directive_engine_t [label = "Directive.r6(Judge)"; comment = "Antithesis: The Arbiter of Choices. Evaluates potential plans from `Plan` against the `CodexOfDirective` and the current context. Selects the most coherent path."; color = darkblue;];
    spark_9_directive_engine_t [label = "Directive.r9(Learn)"; comment = "Synthesis: The Integration of Experience. Analyzes the results from `Monitor` to extract wisdom, updating the `CodexOfDirective` and informing `Optimize`."; color = darkblue;];
    spark_a_directive_engine_t [label = "Directive.receive(Goal)"; comment = "Potential: A desired end-state. Received from the `AuthorityEngine` (a user's command) or generated internally by another process."; shape = invtriangle; color = darkred;];
    spark_b_directive_engine_t [label = "Directive.send(Action)"; comment = "Manifest: A concrete, executable instruction. Sent to the `CorporaEngine` or other Engines to enact change in reality."; shape = triangle; color = darkred;];
    spark_c_directive_engine_t [label = "Directive.dispatch(Strategy)"; comment = "Why-Who: The High-Command. The overarching theme or approach chosen to achieve the Goal (e.g., 'Diplomacy', 'Conquest', 'Stealth')."; shape = doublecircle; color = darkred;];
    spark_d_directive_engine_t [label = "Directive.commit(Tactic)"; comment = "What-How: The Specific Method. The granular, step-by-step plan selected by the `Judge` to implement the `Strategy`."; shape = doublecircle; color = darkgreen;];
    spark_e_directive_engine_t [label = "Directive.serve(Command)"; comment = "When-Where: The Executable Order. The precise, contextualized instruction derived from the `Tactic`, ready for `Execution`."; shape = doublecircle; color = darkblue;];
    spark_f_directive_engine_t [label = "Directive.exec(LawOfDirective)"; comment = "Which-Closure: The Principle of Effective Action. The final, executed law that governs the conversion of Goal into Action. The proof of will."; shape = doublecircle; color = lightgray;];

    spark_a_directive_engine_t -> spark_0_directive_engine_t [label = "IN"; comment = "A Goal is received for processing"; color = darkred; constraint = false;];
    spark_0_directive_engine_t -> spark_b_directive_engine_t [label = "OUT"; comment = "An Action is emitted to affect reality"; color = darkred;];
    spark_0_directive_engine_t -> spark_3_directive_engine_t [label = "REC"; comment = "Consult: What does the Codex advise?"; color = darkblue; dir = both;];
    spark_0_directive_engine_t -> spark_6_directive_engine_t [label = "REC"; comment = "Consult: What does the Judge decide?"; color = darkblue; dir = both;];
    spark_0_directive_engine_t -> spark_9_directive_engine_t [label = "REC"; comment = "Consult: What has been Learned?"; color = darkblue; dir = both;];
    spark_0_directive_engine_t -> spark_1_directive_engine_t [label = "REC"; comment = "Consult: What is the current state? (Analyze)"; color = darkgreen; dir = both;];
    spark_0_directive_engine_t -> spark_2_directive_engine_t [label = "REC"; comment = "Consult: What are the options? (Plan)"; color = darkgreen; dir = both;];
    spark_0_directive_engine_t -> spark_4_directive_engine_t [label = "REC"; comment = "Consult: Execute the chosen plan"; color = darkgreen; dir = both;];
    spark_0_directive_engine_t -> spark_8_directive_engine_t [label = "REC"; comment = "Consult: What is the result? (Monitor)"; color = darkgreen; dir = both;];
    spark_0_directive_engine_t -> spark_7_directive_engine_t [label = "REC"; comment = "Consult: How must we adjust? (Adapt)"; color = darkgreen; dir = both;];
    spark_0_directive_engine_t -> spark_5_directive_engine_t [label = "REC"; comment = "Consult: How can we do better? (Optimize)"; color = darkgreen; dir = both;];

    spark_a_directive_engine_t -> spark_c_directive_engine_t [label = "REC"; comment = "A Goal is formulated into a Strategy"; color = darkred; dir = both;];
    spark_b_directive_engine_t -> spark_c_directive_engine_t [label = "REC"; comment = "The result of an Action informs future Strategy"; color = darkred; dir = both;];
    spark_1_directive_engine_t -> spark_d_directive_engine_t [label = "REC"; comment = "Analysis provides data for Tactic formation"; color = darkgreen; dir = both;];
    spark_2_directive_engine_t -> spark_d_directive_engine_t [label = "REC"; comment = "Planning generates the Tactic"; color = darkgreen; dir = both;];
    spark_4_directive_engine_t -> spark_d_directive_engine_t [label = "REC"; comment = "Execution validates the Tactic"; color = darkgreen; dir = both;];
    spark_8_directive_engine_t -> spark_d_directive_engine_t [label = "REC"; comment = "Monitoring evaluates the Tactic"; color = darkgreen; dir = both;];
    spark_7_directive_engine_t -> spark_d_directive_engine_t [label = "REC"; comment = "Adaptation revises the Tactic"; color = darkgreen; dir = both;];
    spark_5_directive_engine_t -> spark_d_directive_engine_t [label = "REC"; comment = "Optimization refines the Tactic"; color = darkgreen; dir = both;];
    spark_3_directive_engine_t -> spark_e_directive_engine_t [label = "REC"; comment = "The Codex provides rules for the Command"; color = darkblue; dir = both;];
    spark_6_directive_engine_t -> spark_e_directive_engine_t [label = "REC"; comment = "The Judge authorizes the Command"; color = darkblue; dir = both;];
    spark_9_directive_engine_t -> spark_e_directive_engine_t [label = "REC"; comment = "Learning improves future Commands"; color = darkblue; dir = both;];

    spark_1_directive_engine_t -> spark_2_directive_engine_t [label = "REC"; comment = "Analysis informs Planning"; color = darkgreen; dir = both; style = dashed; constraint = false;];
    spark_2_directive_engine_t -> spark_4_directive_engine_t [label = "REC"; comment = "Planning enables Execution"; color = darkgreen; dir = both; style = dashed; constraint = false;];
    spark_4_directive_engine_t -> spark_8_directive_engine_t [label = "REC"; comment = "Execution must be Monitored"; color = darkgreen; dir = both; style = dashed; constraint = false;];
    spark_8_directive_engine_t -> spark_7_directive_engine_t [label = "REC"; comment = "Monitoring may require Adaptation"; color = darkgreen; dir = both; style = dashed; constraint = false;];
    spark_7_directive_engine_t -> spark_5_directive_engine_t [label = "REC"; comment = "Adaptation leads to Optimization"; color = darkgreen; dir = both; style = dashed; constraint = false;];
    spark_5_directive_engine_t -> spark_1_directive_engine_t [label = "REC"; comment = "Optimization enhances future Analysis"; color = darkgreen; dir = both; style = dashed; constraint = false;];
    spark_3_directive_engine_t -> spark_6_directive_engine_t [label = "REC"; comment = "The Codex provides the rules for the Judge"; color = darkblue; dir = both; style = dashed; constraint = false;];
    spark_6_directive_engine_t -> spark_9_directive_engine_t [label = "REC"; comment = "The Judge's decisions become material for Learning"; color = darkblue; dir = both; style = dashed; constraint = false;];
    spark_9_directive_engine_t -> spark_3_directive_engine_t [label = "REC"; comment = "Learning updates the Codex"; color = darkblue; dir = both; style = dashed; constraint = false;];
    spark_a_directive_engine_t -> spark_b_directive_engine_t [label = "REC"; comment = "The great cycle: Goal is realized as Action"; color = darkred; dir = both; style = dashed; constraint = false;];

    spark_c_directive_engine_t -> spark_f_directive_engine_t [label = "OUT"; comment = "Strategy, when proven, becomes Law"; color = darkred; dir = both;];
    spark_d_directive_engine_t -> spark_f_directive_engine_t [label = "OUT"; comment = "Tactic, when successful, becomes Law"; color = darkgreen; dir = both;];
    spark_e_directive_engine_t -> spark_f_directive_engine_t [label = "OUT"; comment = "Command, when executed, becomes Law"; color = darkblue; dir = both;];
}