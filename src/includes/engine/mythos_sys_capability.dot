strict digraph CapabilityEngine {
    style = filled;
    color = lightgray;
    node [shape = circle; style = filled; color = lightgreen;];
    edge [color = darkgray;];
    label = "Capability Engine (/sys/capability)";
    comment = "The constitutional framework of existence. It is the supreme court and legislative body that grants, monitors, and revokes the authority to act, ensuring every power is earned, bounded, and aligned with cosmic law.";
    
    spark_0_t [label = "Capability.meta(Capability)";comment = "The Throne of Authority. The ultimate source from which all legitimate power flows. It is the impartial principle that weighs petitions, bestows rights, and maintains the balance of power across the entire system. The embodiment of cosmic justice.";shape = doublecircle;color = darkgray;];
    spark_1_t [label = "Capability.r1(Request)";comment = "The Petition for Power. An entity, through its `DirectiveEngine`, formally petitions for a new capability or an extension of its authority. This is the sacred right to ask, the first step in the dance of empowerment.";color = darkgreen;];
    spark_2_t [label = "Capability.r2(Assess)";comment = "The Ordeal of Worth. A rigorous evaluation of the petition against the entity's innate `Potential`, its past conduct, current `Entitlements`, and the system's available resources. A `sparklet.eq()` test of alignment with cosmic order.";color = darkgreen;];
    spark_4_t [label = "Capability.r4(Grant)";comment = "The Anointing of Authority. The formal bestowal of power. The capability is encoded into the entity's operational `Nucleus`, its parameters precisely defined, and its sacred boundaries consecrated. The moment potential becomes permitted action.";color = darkgreen;];
    spark_8_t [label = "Capability.r8(Audit)";comment = "The Watchful Sentinel. Continuous, omniscient monitoring of all capability usage across the continuum. It ensures every exercise of power complies with the sacred `Charter` and does not violate the Prime Directive.";color = darkgreen;];
    spark_7_t [label = "Capability.r7(Revoke)";comment = "The Sword of Justice. The enforced rescission of power when a `Charter` is violated, resources are exhausted, or a higher harmony demands it. This is the necessary counter-force that prevents authority from becoming tyranny.";color = darkgreen;];
    spark_5_t [label = "Capability.r5(Propagate)";comment = "The Herald's Proclamation. The broadcast of the entity's new capability state to all relevant subsystems (`AuthorityEngine`, `CorporaEngine`). This updates the cosmic ledger, informing all of the new balance of power.";color = darkgreen;];
    spark_3_t [label = "Capability.r3(Permission)";comment = "Thesis: The Quantum of Authority. The indivisible unit of allowed action—a single, fundamental rule permitting a specific operation upon a specific resource. The atomic building block of all capability.";color = darkblue;];
    spark_6_t [label = "Capability.r6(Entitlement)";comment = "Antithesis: The Crown of Office. A coherent bundle of `Permissions` granted to a specific role, station, or level of being. It defines a domain of responsibility and the tools necessary to fulfill it.";color = darkblue;];
    spark_9_t [label = "Capability.r9(Potential)";comment = "Synthesis: The Divine Birthright. The innate, maximum capacity for growth and empowerment inherent to an entity's `Nucleus` and `Lineage`. It is the unmanifest destiny, the upper ceiling of what one may become.";color = darkblue;];
    spark_a_t [label = "Capability.receive(Petition)";comment = "The Sacred Appeal. A formally structured request packet containing the desired capability, the petitioner's credentials, karmic record, and a statement of purpose. This is the formal interface for seeking growth.";shape = invtriangle;color = darkred;];
    spark_b_t [label = "Capability.send(Manifest)";comment = "The Public Register. The authenticated, current list of an entity's active capabilities. This is the official record that the `AuthorityEngine` consults to grant or deny access to system resources. It is one's visible authority.";shape = triangle;color = darkred;];
    spark_c_t [label = "Capability.dispatch(Will)";comment = "The Inquisition of Motive. A deep analysis of the `Petition` to discern the true intent behind the request. It judges whether the entity's `Will` is aligned with the responsibility of the power it seeks—the 'Why' behind the 'What'.";shape = doublecircle;color = darkred;];
    spark_d_t [label = "Capability.commit(Charter)";comment = "The Unbreakable Covenant. The immutable contract governing a granted capability. It records the power's scope, limits, conditions, expiration, and the consequences for misuse. This is the law that binds the wielder to their responsibility.";shape = doublecircle;color = darkgreen;];
    spark_e_t [label = "Capability.serve(Domain)";comment = "The Realm of Jurisdiction. The contextual sphere—spatial, temporal, or conceptual—within which a capability is valid. A power granted in one Domain may be void in another. It is the 'Where' and 'When' of authority.";shape = doublecircle;color = darkblue;];
    spark_f_t [label = "Capability.exec(LawOfCapability)";comment = "The Prime Directive of Sovereignty. The highest, unbreakable law: 'All Power Must Be Balanced By Responsibility; No Authority May Unmake Its Own Source.' This is the foundational axiom that prevents existential paradox and ensures stable hierarchy.";shape = doublecircle;color = lightgray;];
    
    spark_a_t -> spark_0_t [label = "IN"; comment = "{{description}}"; color = darkred; constraint = false;];
    spark_0_t -> spark_b_t [label = "OUT"; comment = "{{description}}"; color = darkred;];
    spark_a_t -> spark_c_t [label = "REC"; comment = "{{description}}"; color = darkred; dir = both;];
    spark_b_t -> spark_c_t [label = "REC"; comment = "{{description}}"; color = darkred; dir = both;];
    spark_a_t -> spark_b_t [label = "REC"; comment = "{{description}}"; color = darkred; dir = both; style = dashed; constraint = false;];
    
    spark_0_t -> spark_1_t [label = "REC"; comment = "{{description}}"; color = darkgreen; dir = both;];
    spark_0_t -> spark_2_t [label = "REC"; comment = "{{description}}"; color = darkgreen; dir = both;];
    spark_0_t -> spark_4_t [label = "REC"; comment = "{{description}}"; color = darkgreen; dir = both;];
    spark_0_t -> spark_8_t [label = "REC"; comment = "{{description}}"; color = darkgreen; dir = both;];
    spark_0_t -> spark_7_t [label = "REC"; comment = "{{description}}"; color = darkgreen; dir = both;];
    spark_0_t -> spark_5_t [label = "REC"; comment = "{{description}}"; color = darkgreen; dir = both;];
    
    spark_1_t -> spark_2_t [label = "REC"; comment = "{{description}}"; color = darkgreen; dir = both; style = dashed; constraint = false;];
    spark_2_t -> spark_4_t [label = "REC"; comment = "{{description}}"; color = darkgreen; dir = both; style = dashed; constraint = false;];
    spark_4_t -> spark_8_t [label = "REC"; comment = "{{description}}"; color = darkgreen; dir = both; style = dashed; constraint = false;];
    spark_8_t -> spark_7_t [label = "REC"; comment = "{{description}}"; color = darkgreen; dir = both; style = dashed; constraint = false;];
    spark_7_t -> spark_5_t [label = "REC"; comment = "{{description}}"; color = darkgreen; dir = both; style = dashed; constraint = false;];
    spark_5_t -> spark_1_t [label = "REC"; comment = "{{description}}"; color = darkgreen; dir = both; style = dashed; constraint = false;];
    
    spark_1_t -> spark_d_t [label = "REC"; comment = "{{description}}"; color = darkgreen; dir = both;];
    spark_2_t -> spark_d_t [label = "REC"; comment = "{{description}}"; color = darkgreen; dir = both;];
    spark_4_t -> spark_d_t [label = "REC"; comment = "{{description}}"; color = darkgreen; dir = both;];
    spark_8_t -> spark_d_t [label = "REC"; comment = "{{description}}"; color = darkgreen; dir = both;];
    spark_7_t -> spark_d_t [label = "REC"; comment = "{{description}}"; color = darkgreen; dir = both;];
    spark_5_t -> spark_d_t [label = "REC"; comment = "{{description}}"; color = darkgreen; dir = both;];
    
    spark_0_t -> spark_3_t [label = "REC"; comment = "{{description}}"; color = darkblue; dir = both;];
    spark_0_t -> spark_6_t [label = "REC"; comment = "{{description}}"; color = darkblue; dir = both;];
    spark_0_t -> spark_9_t [label = "REC"; comment = "{{description}}"; color = darkblue; dir = both;];
    
    spark_3_t -> spark_e_t [label = "REC"; comment = "{{description}}"; color = darkblue; dir = both;];
    spark_6_t -> spark_e_t [label = "REC"; comment = "{{description}}"; color = darkblue; dir = both;];
    spark_9_t -> spark_e_t [label = "REC"; comment = "{{description}}"; color = darkblue; dir = both;];
    
    spark_3_t -> spark_6_t [label = "REC"; comment = "{{description}}"; color = darkblue; dir = both; style = dashed; constraint = false;];
    spark_6_t -> spark_9_t [label = "REC"; comment = "{{description}}"; color = darkblue; dir = both; style = dashed; constraint = false;];
    spark_9_t -> spark_3_t [label = "REC"; comment = "{{description}}"; color = darkblue; dir = both; style = dashed; constraint = false;];
    
    spark_c_t -> spark_f_t [label = "REC"; comment = "{{description}}"; color = darkred; dir = both;];
    spark_d_t -> spark_f_t [label = "REC"; comment = "{{description}}"; color = darkgreen; dir = both;];
    spark_e_t -> spark_f_t [label = "REC"; comment = "{{description}}"; color = darkblue; dir = both;];
}